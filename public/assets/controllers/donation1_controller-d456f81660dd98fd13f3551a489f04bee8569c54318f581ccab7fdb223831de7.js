import{Controller}from"@hotwired/stimulus";var svg,title;export default class extends Controller{static targets=["svgField","calculateHeightOf"];static values={width:Number,titleSection:Object,donateFoodSection:Object,bagsImageUrl:String,wizardImageUrl:String,schubkarreImageUrl:String};connect(){this.donateFoodSectionValue={},import("d3").then((t=>{window.d3=t,this.setSvg().then((()=>this.appendTitleSection())).then((()=>this.appendDonateFoodSection())).then((()=>this.adjustHeightOfSvg()))}))}initiate(){}setSvg(){var t=this;return new Promise((function(e){t.widthValue=t.svgFieldTarget.offsetWidth,e(svg=d3.select("#svgField").append("svg").attr("width",t.widthValue).attr("height",100))}))}appendTitleSection(){var t=this;return new Promise((function(e){let n="\n      <p>\n      <strong>\n        Tiere in Not brauchen deine Hilfe.\n      </strong>\n      </p>\n      <p>\n        Hilf ihnen und spende Futter, Medikamente oder Streu zum Liegen.\n      </p>\n    ";t.calculateHeightOf(n).then((i=>{var a=svg.append("foreignObject").attr("x",0).attr("y",0).attr("width",t.widthValue).attr("height",i).append("xhtml:div").html(n);t.titleSectionValue={height:i,svg:a},console.log(t.titleSectionValue),e(t.titleSectionValue)}))}))}appendDonateFoodSection(){var t=this;return new Promise((function(e){let n=`\n        <p>\n        <strong>\n          Wizard hat keine Z\xe4hne mehr und braucht spezielles Futter.\n        </strong>\n        </p>\n        <p>\n          <img src="${t.wizardImageUrlValue}" class="img-fluid">\n        </p>\n        <p>\n          <img src="${t.bagsImageUrlValue}" class="img-fluid">\n        </p>\n\n        <p>\n          <a class="btn btn-primary" href="#" role="button">Ich kaufe 4 Futters\xe4cke f\xfcr Wizard</a>\n        </p>\n      `;t.calculateHeightOf(n).then((i=>{var a=t.donateFoodSectionValue.svg=svg.append("foreignObject").attr("x",0).attr("y",t.titleSectionValue.height).attr("width",t.widthValue).attr("height",i).append("xhtml:div").html(n);t.donateFoodSectionValue={height:i,svg:a},console.log(t.donateFoodSectionValue),e(t.donateFoodSectionValue)}))}))}appendSchubkarre(){var t=this;return new Promise((function(e){var n="\n\n      ";svg.append("foreignObject").attr("x",0).attr("y",t.titleSectionValue.height).attr("width",t.widthValue).attr("height",calculated_height).append("xhtml:div").html(n),e("")}))}calculateHeightOf(t){var e=this;return new Promise((function(n){e.calculateHeightOfTarget.innerHTML=t,e.calculateHeightOfTarget.style.width=e.standardWidthPercentageValue+"%",setTimeout((()=>{let t=e.calculateHeightOfTarget.offsetHeight+10;e.calculateHeightOfTarget.innerHTML="",n(t)}),100)}))}adjustHeightOfSvg(){var t=this;return new Promise((function(e){console.log(t.titleSectionValue.height+t.donateFoodSectionValue.height),console.log(svg.style),svg.transition().duration(10).attr("height",t.titleSectionValue.height+t.donateFoodSectionValue.height),e("")}))}}